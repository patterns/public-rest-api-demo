@startumlstate "verify" as Verify <<choice>>[*] -> Prepare: new Facebook accountPrepare: Make a new account on the ID provider (FB for this example)Prepare: Set the email to a DaVinci base domainPrepare --> Verify: verificationVerify: GitHub may initiate email verificationVerify --> OAuth: unverifiedOAuth: Sign-up on DaVinci siteOAuth: Choose FB as ID providerOAuth --> Login: credentialsLogin: Log-in to the newly created FB accountLogin --> AuthorizeAuthorize: Choose to authorize the DaVinci siteAuthorize --> RedirectRedirect: FB issues authorization codeRedirect: FB redirects to DaVinci callbackRedirect --> TokenToken: DV exchanges authorization code for access tokenToken --> Resource: accessResource: DV uses access token and requests email from FBResource --> Facebook: emailFacebook: FB honors access tokenFacebook: FB returns emailFacebook --> DaVinci: validationDaVinci: DV validates and determines email is unverifiedDaVinci: DV halts registrationDaVinci -> [*]@enduml